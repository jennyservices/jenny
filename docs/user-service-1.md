---
id: user-service-1
title: Setting up the Server
sidebar_label: Setting up the Server
---

Let's start by creating our first swagger definition.

```
touch transport/v1/swagger.yaml
```

Our simple service has one method on `/user` path.

```yaml
swagger: "2.0"
info:
  version: 1.0.0
  title: Users
  license:
    name: MIT
paths:
  /user:
    get:
      summary: Gets a User from the database
      operationId: getUser
      tags:
        - User
      parameters:
        - name: id
          in: query
          required: true
          description: Id of the user
          type: number
      responses:
        200:
          schema:
            $ref: '#/definitions/User'
        404:
          description: User can't be found
definitions:
  User:
    properties:
      id:
        type: number
      name:
        type: string
```

Now it's time to generate our code

```
jenny generate
```

Now that we have a look at what's been created very briefly by navigating to the
`transport/v1/jenny.go` file.

```go
// Users as generated by Jenny
// Please read more at https://localhost:8080/_spec
type Users interface {

	// GetUser Gets a User from the database
	GetUser(ctx context.Context, ID int) (Body *User, err error)
}
```

Let's first create a `user.go` file under `user` package, which will implement
the business logic of our API.

```go
type userService struct {
}

func (us *userService) GetUser(ctx context.Context, id int) (*v1.User, error) {
	return nil, errors.New("not implemented")
}
// New retuns a new UserService as required by the transport layer
func New() v1.Users {
	return &userService{}
}
```

Now that we have a broken implementation of our API let's glue everything
together.

First we create a new file called `main.go` under `cmd/userservice/`

Let's import the transport package

```go
import (
     "github.com/Typeform/users/transport/v1"
     "github.com/Typeform/users/user"
)
```

And put everything together

```go
userService := user.New()
us := v1.NewUsersServer(userService)

log.Printf("listening at %s\n", *addr)
log.Fatal("listening at "+*addr+" failed: ", http.ListenAndServe(*addr, us))
```

[See all files](https://github.com/sevki/user/tree/tutorial-1)

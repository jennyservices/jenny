{{ define "service" }}
import fetch from 'cross-fetch'

class {{.Name }}Client {
  constructor() {
    super( )
  }
  baseURL = "{{.BaseURL}}"
{{ range .Resources }}
  {{ template "endpoint" . }}
{{ end }}
}
{{ end }}




{{ define "endpoint" -}}
async {{ .Name }}({{ range .Parameters }} {{template "ident" .}},{{ end }}) : Promise<{{  template "responses" . }}>  {
  let data : {{ template "responses" . }}  =  await fetch(`{{.Path}}`);
  return data
}
{{- end }}

{{ define "responses" -}}
{{- $resp :=  firstOrDefault .Responses -}}
{{- range $resp.Returns -}}
{{ getType . }}
{{- end -}}
{{- end }}

{{ define "ident" -}}
{{ .Name }}: {{ getType . }}
{{- end }}
